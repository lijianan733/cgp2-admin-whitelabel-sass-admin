
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="https://cdn.staticfile.org/angular.js/1.4.6/angular.min.js"></script>
</head>
<body>

<div ng-app="myApp" ng-controller="formCtrl">
    <form novalidate>
        name:<br>
        <input type="text" ng-model="user.firstName"><br>
        code:<br>
        <input type="text" ng-model="user.lastName">
        <br>description:<br>
        <textarea></textarea>
        <br><br>
        <button ng-click="reset()">RESET</button>
        <!--<select name="" ng-model="$ctrl._addressInfo.countryCode2" name="countryCode2" required>
            <option value="CN">China</option>
            <option value="US">America</option>
            <option value="JP">Japan</option>
        </select>-->
        <select ng-model="test">
            <option ng-repeat="x in arr1" value="{{x.code}}">{{x.title}}</option>
        </select>

    </form>
    <!--<p>form = {{arr1[0].code}}</p>-->
    <p>master = {{master}}</p>
</div>

<script>
    var app = angular.module('myApp', []);
    app.controller('formCtrl', function($scope, $http,$q) {

        $scope.addressInfos = {};
        /*$.ajax({
            type: "GET",
            contentType: "application/json;charset=utf-8",
            url: adminPath + "api/currencies?_dc=1600413511011&page=1&start=0&limit=25",
            async: false,
            dataType: "json",
            success: function (result) {
                if (result.success) {
                    console.log(result.data);
                } else {
                    console.log(result);
                }
            },
            error: function (err) {
                console.log(err);
            }
        });*/
        function getCurrencies(){
            var deferred = $q.defer();
            $http({
                url: "https://dev-sz-qpson-nginx.qppdev.com/cgp-rest/api/currencies?_dc=1600413511011&page=1&start=0&limit=25",
                method: 'GET',
                async: false,
                headers: {Authorization: 'Bearer ' + '88f081a9-ec69-4fae-a558-53c6380f841f'}
            }).then(function (resp) {
                deferred.resolve(resp);
                //$scope.arr1 = resp.data;
                //console.log(resp.data);
            }, function (err) {
                deferred.reject(err);
                //console.log(err);
            });
            return deferred.promise;
        }
        var promise = getCurrencies();
        promise.then(function(data) {  // 调用承诺API获取数据 .resolve
            //console.log(data);
            $scope.arr1 = data.data.data.content;
        }, function(data) {  // 处理错误 .reject
            $scope.user = {error: '用户不存在！'};
        });
        //$scope
        $scope.master = {firstName: "John", lastName: "Doe"};
        $scope.arr1 = [{code: 'rrr',title: 'rrr'},{code: 'ttt',title:'ttt'}];
        console.log($scope.arr1);
        $scope.reset = function() {
            $scope.user = angular.copy($scope.master);
        };
        //$scope.reset();
    });
</script>

</body>
</html>